%!TEX root = htm.tex
\subsection{Progressive HyTM with linear}
%
\input{prog-fp-sp}
%
%
\vspace{1mm}\noindent\textbf{Base objects.}


\vspace{1mm}\noindent\textbf{Fast-path transactions.}
For a fast-path transaction $T_k$, the $\Read_k(X_j)$ implementation first reads $r_j$ 

Updating fast-path transactions use uninstrumented writes:
$\Write (X_j,v)$ simply stores the cached state of $X_j$ along with its value $v$ and
if the cache has not been invalidated, updates the shared memory
during $\TryC_k$ by invoking the $\ms{commit-cache}$ primitive.

\vspace{1mm}\noindent\textbf{Slow-path read-only transactions.}
A read-only transaction simply returns $C_k$ during the tryCommit.

\vspace{1mm}\noindent\textbf{Slow-path updating transactions.}
The $\Write_k(X,v)$ implementation of a slow-path transaction stores
$v$ and the current value of $X_j$ locally, 
deferring the actual update in shared memory to tryCommit. 


\vspace{1mm}\noindent\textbf{Instrumentation cost.}
%

We can now prove the following theorem:
%
\begin{theorem}
\label{th:inswrite}
There exists an opaque HyTM implementation that provides invisible reads, progressiveness
such that
in its every execution $E$, every fast-path transaction $T\in \ms{txns}(E)$
accesses $m=|\Dset(T_k)|$ distinct metadata base objects.
\end{theorem}
%
\begin{proofsketch}

\end{proofsketch}
%
%
\input{prog-fp}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Progressive HyTM}
%
We can now prove the following theorem:
%
\begin{theorem}
\label{th:inswrite2}
There exists an opaque HyTM implementation that provides invisible reads
such that 
\begin{itemize}
\item 
in every execution $E$,
every fast-path transaction $T\in \ms{txns}(E)$
accesses one metadata base object,
\item
every execution $E$ is fast-path progressive or for
every fast-path transaction $T\in \ms{txns}(E)$
that returns $A_k$ in $E$, there exists an updating slow-path transaction $T_m \in \ms{txns}(E)$
concurrent to $T_k$.
\end{itemize}
\end{theorem}
%
\begin{proofsketch}
% 
\end{proofsketch}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%